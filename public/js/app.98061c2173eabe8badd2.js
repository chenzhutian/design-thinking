webpackJsonp([2,0],[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=s(65),a=n(i),o=s(63),r=n(o);new a["default"]({el:"body",components:{App:r["default"]}})},,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="connect",n="LOGIN",i="LOGIN_RESULT",a="TEST_PI",o="MOVE_SLIDES",r="RECEIVE_MESSAGE",c="PUSH_UNREAD_MESSAGE",u="DECAY",l="SEND_MESSAGE",d="READ_MESSAGE";t.CONNECT=s,t.LOGIN=n,t.LOGIN_RESULT=i,t.TEST_PI=a,t.MOVE_SLIDES=o,t.MESSAGE=r,t.PUSH_UNREAD_MESSAGE=c,t.DECAY=u,t.SEND_MESSAGE=l,t.READ_MESSAGE=d},,,,,,,,,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="/ALBUM",n="/VASE";t.NS_ALBUM=s,t.NS_VASE=n},function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(49),a=n(i),o=s(64),r=n(o),c=s(25),u=s(9),l=s(54),d=n(l),p=s(55),h=n(p),m=s(56),f=n(m),g=s(57),S=n(g),v=s(58),E=n(v),_=s(59),x=n(_);t["default"]={ready:function(){var e=this;this.socket=new a["default"](c.NS_ALBUM),this.socket.on(u.CONNECT,function(){var t=localStorage.getItem("userName");t&&(e.userName=t,e.login())}),this.socket.on(u.LOGIN_RESULT,function(t){t.state?(e.userType=t.userType,localStorage.clear(),localStorage.setItem("userName",e.userName),e.loginSuccess=!0,e.$nextTick(function(){e.$refs.carousel.setData(e.images,e.userType,e.userName,e.socket)})):console.warn(t.info)})},components:{Carousel:r["default"]},socket:null,data:function(){return{loginSuccess:!1,userName:null,userType:null,images:[{components:[d["default"]],msg:"Craving for more thanately, you have FooPar Beta!"},{components:[h["default"]],msg:"Try our catering ety of snacks and refreshments for functions"},{components:[f["default"]],msg:"Simply choose ion to avoid queues in the canteens"},{components:[S["default"]],msg:"Anytime you feampus foods, don't hesitate to tell us."},{components:[x["default"],E["default"]],msg:""}]}},methods:{login:function(){this.userName&&this.userName.length&&this.socket.emit(u.LOGIN,{userName:this.userName,roomName:"design-thinking"})}}}},function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(43),a=n(i),o=s(9);t["default"]={ready:function(){this.hammer=new a["default"](this.$els.wraper),this.hammer.on("swipeleft swiperight panleft panright panend pancancel",this.hammerHandler)},socket:null,hammer:null,data:function(){return{userType:null,userName:null,currentSlideIndex:0,images:[],imageComponentsStyle:[],imagesCount:0,wraperTransition:{transition:!0},carouselWraperStyle:{left:"0%",width:0},slideWidth:0,unReadMessage:[],panBoundaryRatio:.25}},methods:{setData:function(e,t,s,n){var i=this;this.socket=n,this.socket.on(o.MOVE_SLIDES,this.setCurrentSlide),this.socket.on(o.MESSAGE,this.receiveMessage),this.socket.on(o.PUSH_UNREAD_MESSAGE,this.receiveUnReadMessage),this.socket.on(o.DECAY,this.handleDecay),this.userType=t,this.userName=s,this.images=e,this.images.forEach(function(e,t){var s=[];e.components.forEach(function(e){s.push({opacity:1,backgroundImage:"radial-gradient(60% 60%, rgba(0, 0, 0, 0.6) 0%,\n                        rgba(0, 0, 0, 0) 95%), url("+e+")"})}),i.imageComponentsStyle.push(s)}),this.imagesCount=this.images.length,this.carouselWraperStyle.width=100*this.imagesCount+"%",this.$nextTick(function(){i.slideWidth=i.$els.wraper.clientWidth/i.imagesCount})},drawImagesToCanvas:function(){var e=this;this.images.forEach(function(t,s){var n=e.$els.wraper.querySelector("#canvas-"+s),i=n.getContext("2d"),a=new Image;a.onload=function(){i.drawImage(a,0,0),i.fillRect(0,0,500,500)},a.src=t.img})},setCurrentSlide:function(e){this.currentSlideIndex=e,this.carouselWraperStyle.left=-100*this.currentSlideIndex+"%"},moveSlides:function(e){var t=this,s=arguments.length<=1||void 0===arguments[1]||arguments[1];this.wraperTransition.transition=s,this.$nextTick(function(){t.setCurrentSlide(e)}),this.socket.emit(o.MOVE_SLIDES,e)},sendMessage:function(){this.socket.emit(o.SEND_MESSAGE,"this is a message "+Math.random())},receiveMessage:function(e){e.id&&(this.imageComponentsStyle[4][1].opacity-=.1,this.unReadMessage.push(e))},readMessage:function(){this.imageComponentsStyle[4][1].opacity+=.1;var e=this.unReadMessage.shift();this.socket.emit(o.READ_MESSAGE,e.id)},receiveUnReadMessage:function(e){e&&e.forEach(this.receiveMessage)},handleDecay:function(e){console.log(e)},hammerHandler:function(e){switch(e.type){case"swipeleft":case"swiperight":this.handleSwipe(e);break;case"panleft":case"panright":case"panend":case"pancancel":this.handlePan(e)}},handleSwipe:function(e){switch(e.direction){case 4:this.currentSlideIndex>0&&--this.currentSlideIndex;break;case 2:this.currentSlideIndex<this.imagesCount-1&&++this.currentSlideIndex}this.moveSlides(this.currentSlideIndex),this.hammer.stop(!0)},handlePan:function(e){switch(e.type){case"panleft":case"panright":var t=this.carouselWraperStyle.left.slice(0,-1),s=100*(this.imagesCount-1);(0===this.currentSlideIndex&&t>=0||this.currentSlideIndex===this.imagesCount-1&&t<=s)&&(e.deltaX*=.2),this.wraperTransition.transition=!1,this.carouselWraperStyle.left=-100*(this.currentSlideIndex-e.deltaX/this.slideWidth)+"%";break;case"panend":case"pancancel":Math.abs(e.deltaX)>this.slideWidth*this.panBoundaryRatio&&(e.deltaX>0?this.currentSlideIndex>0&&--this.currentSlideIndex:this.currentSlideIndex<this.imagesCount-1&&++this.currentSlideIndex),this.moveSlides(this.currentSlideIndex)}}}}},,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,,function(e,t,s){e.exports=s.p+"image/1-min.a3a1845.jpg"},function(e,t,s){e.exports=s.p+"image/2-min.a3a850b.jpg"},function(e,t,s){e.exports=s.p+"image/3-min.b738a65.jpg"},function(e,t,s){e.exports=s.p+"image/4-min.0d35e38.jpg"},function(e,t,s){e.exports=s.p+"image/5-min.2c70309.jpg"},function(e,t,s){e.exports=s.p+"image/6-min.c606ca6.jpg"},,function(e,t){e.exports='<div class=carousel _v-6b753e81=""> <ol class=carousel-indicators _v-6b753e81=""> <li v-for="image in images" :class="{active: $index===currentSlideIndex }" @click=moveSlides($index) _v-6b753e81=""></li> </ol> <div class=carousel-inner _v-6b753e81=""> <div class=carousel-wraper :class=wraperTransition :style=carouselWraperStyle v-el:wraper="" _v-6b753e81=""> <div v-for="(imageIndex, image) in images" class=image :class="{active:$index === currentSlideIndex}" :style="{\nwidth: `${100 /imagesCount}%`\n            }" _v-6b753e81=""> <div v-for="(componentIndex,componentSrc) in image.components" class=image-component :style=imageComponentsStyle[imageIndex][componentIndex] _v-6b753e81=""> <p _v-6b753e81="">{{image.msg}}</p> </div> </div> </div> </div> <button @click=sendMessage _v-6b753e81="">Send</button> <button @click=readMessage _v-6b753e81="">Listen</button> <ul id=messages _v-6b753e81=""> <li v-for="msg in unReadMessage" _v-6b753e81="">{{msg.content}}</li> </ul> </div>'},function(e,t){e.exports="<div id=app> <carousel v-if=loginSuccess v-ref:carousel></carousel> <div v-else class=btn-chose-type> <input type=text v-model=userName /> <button @click=login>login</button> </div> </div>"},function(e,t,s){var n,i;s(41),n=s(26),i=s(62),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,s){var n,i;s(42),n=s(27),i=s(61),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},,,function(e,t){}]);
//# sourceMappingURL=app.98061c2173eabe8badd2.js.map