webpackJsonp([2,0],{0:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=s(63),a=n(i),o=s(61),r=n(o);new a["default"]({el:"body",components:{App:r["default"]}})},24:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(47),a=n(i),o=s(62),r=n(o),c=s(52),u=n(c),l=s(53),d=n(l),p=s(54),m=n(p),h=s(55),g=n(h),f=s(56),v=n(f),y=s(57),x=n(y);t["default"]={ready:function(){var e=this;this.socket=new a["default"]("/ALBUM"),this.socket.on("connect",function(){e.socket.emit("getUserType","design-thinking")}),this.socket.on("reconnect",function(){e.socket.emit("login",{roomName:"design-thinking",userType:e.userType,userName:e.userName})}),this.socket.on("userType",function(t){console.log(t),t?(localStorage.clear(),localStorage.setItem("userType",t.userType),localStorage.setItem("userName",t.userName),e.userType=t.userType,e.userName=t.userName,e.hasLocalUserType=!0,e.$nextTick(function(){e.$refs.carousel.setData(e.images,e.userType,e.userName,e.socket)})):!function(){var t=localStorage.getItem("userType"),s=localStorage.getItem("userName");console.log("localStorage:"+t+":"+s),t&&s&&(e.userType=t,e.userName=s,e.hasLocalUserType=!0,e.$nextTick(function(){e.$refs.carousel.setData(e.images,t,e.userName,e.socket)}))}()})},components:{Carousel:r["default"]},socket:null,data:function(){return{hasLocalUserType:!1,userName:null,images:[{components:[u["default"]],msg:"Craving for more thanately, you have FooPar Beta!"},{components:[d["default"]],msg:"Try our catering ety of snacks and refreshments for functions"},{components:[m["default"]],msg:"Simply choose ion to avoid queues in the canteens"},{components:[g["default"]],msg:"Anytime you feampus foods, don't hesitate to tell us."},{components:[x["default"],v["default"]],msg:""}]}},methods:{setUserType:function(e){var t=this;if(this.userName&&this.userName.length){var s=e?"parent":"child";localStorage.setItem("userType",s),localStorage.setItem("userName",this.userName),this.hasLocalUserType=!0,this.$nextTick(function(){t.$refs.carousel.setData(t.images,s,t.userName,t.socket)})}}}}},25:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(41),a=n(i);t["default"]={ready:function(){this.hammer=new a["default"](this.$els.wraper),this.hammer.on("swipeleft swiperight panleft panright panend pancancel",this.hammerHandler)},socket:null,hammer:null,data:function(){return{userType:null,userName:null,currentSlideIndex:0,images:[],imageComponentsStyle:[],imagesCount:0,wraperTransition:{transition:!0},carouselWraperStyle:{left:"0%",width:0},slideWidth:0,unReadMessage:[],panBoundaryRatio:.25}},methods:{setData:function(e,t,s,n){var i=this;this.socket=n,this.socket.on("moveSlides",this.setCurrentSlide),this.socket.on("message",this.receiveMessage),this.socket.on("unReadMessage",this.receiveUnReadMessage),this.socket.on("decay",this.handleDecay),this.userType=t,this.userName=s,this.socket.emit("login",{roomName:"design-thinking",userType:t,userName:s}),this.images=e,this.images.forEach(function(e,t){var s=[];e.components.forEach(function(e){s.push({opacity:1,backgroundImage:"radial-gradient(60% 60%, rgba(0, 0, 0, 0.6) 0%,\n                        rgba(0, 0, 0, 0) 95%), url("+e+")"})}),i.imageComponentsStyle.push(s)}),this.imagesCount=this.images.length,this.carouselWraperStyle.width=100*this.imagesCount+"%",this.$nextTick(function(){i.slideWidth=i.$els.wraper.clientWidth/i.imagesCount})},drawImagesToCanvas:function(){var e=this;this.images.forEach(function(t,s){var n=e.$els.wraper.querySelector("#canvas-"+s),i=n.getContext("2d"),a=new Image;a.onload=function(){i.drawImage(a,0,0),i.fillRect(0,0,500,500)},a.src=t.img})},setCurrentSlide:function(e){this.currentSlideIndex=e,this.carouselWraperStyle.left=-100*this.currentSlideIndex+"%"},moveSlides:function(e){var t=this,s=arguments.length<=1||void 0===arguments[1]||arguments[1];this.wraperTransition.transition=s,this.$nextTick(function(){t.setCurrentSlide(e)}),this.socket.emit("moveSlides",e)},sendMessage:function(){this.socket.emit("sendMessage","this is a message "+Math.random())},receiveMessage:function(e){e.id&&(this.imageComponentsStyle[4][1].opacity-=.1,this.unReadMessage.push(e))},readMessage:function(){this.imageComponentsStyle[4][1].opacity+=.1;var e=this.unReadMessage.shift();this.socket.emit("readMessage",e.id)},receiveUnReadMessage:function(e){e&&e.forEach(this.receiveMessage)},handleDecay:function(e){console.log(e)},hammerHandler:function(e){switch(e.type){case"swipeleft":case"swiperight":this.handleSwipe(e);break;case"panleft":case"panright":case"panend":case"pancancel":this.handlePan(e)}},handleSwipe:function(e){switch(e.direction){case 4:this.currentSlideIndex>0&&--this.currentSlideIndex;break;case 2:this.currentSlideIndex<this.imagesCount-1&&++this.currentSlideIndex}this.moveSlides(this.currentSlideIndex),this.hammer.stop(!0)},handlePan:function(e){switch(e.type){case"panleft":case"panright":var t=this.carouselWraperStyle.left.slice(0,-1),s=100*(this.imagesCount-1);(0===this.currentSlideIndex&&t>=0||this.currentSlideIndex===this.imagesCount-1&&t<=s)&&(e.deltaX*=.2),this.wraperTransition.transition=!1,this.carouselWraperStyle.left=-100*(this.currentSlideIndex-e.deltaX/this.slideWidth)+"%";break;case"panend":case"pancancel":Math.abs(e.deltaX)>this.slideWidth*this.panBoundaryRatio&&(e.deltaX>0?this.currentSlideIndex>0&&--this.currentSlideIndex:this.currentSlideIndex<this.imagesCount-1&&++this.currentSlideIndex),this.moveSlides(this.currentSlideIndex)}}}}},39:function(e,t){},40:function(e,t){},52:function(e,t,s){e.exports=s.p+"image/1-min.a3a1845.jpg"},53:function(e,t,s){e.exports=s.p+"image/2-min.a3a850b.jpg"},54:function(e,t,s){e.exports=s.p+"image/3-min.b738a65.jpg"},55:function(e,t,s){e.exports=s.p+"image/4-min.0d35e38.jpg"},56:function(e,t,s){e.exports=s.p+"image/5-min.2c70309.jpg"},57:function(e,t,s){e.exports=s.p+"image/6-min.c606ca6.jpg"},59:function(e,t){e.exports='<div class=carousel _v-6b753e81=""> <ol class=carousel-indicators _v-6b753e81=""> <li v-for="image in images" :class="{active: $index===currentSlideIndex }" @click=moveSlides($index) _v-6b753e81=""></li> </ol> <div class=carousel-inner _v-6b753e81=""> <div class=carousel-wraper :class=wraperTransition :style=carouselWraperStyle v-el:wraper="" _v-6b753e81=""> <div v-for="(imageIndex, image) in images" class=image :class="{active:$index === currentSlideIndex}" :style="{\nwidth: `${100 /imagesCount}%`\n            }" _v-6b753e81=""> <div v-for="(componentIndex,componentSrc) in image.components" class=image-component :style=imageComponentsStyle[imageIndex][componentIndex] _v-6b753e81=""> <p _v-6b753e81="">{{image.msg}}</p> </div> </div> </div> </div> <button @click=sendMessage _v-6b753e81="">Send</button> <button @click=readMessage _v-6b753e81="">Listen</button> <ul id=messages _v-6b753e81=""> <li v-for="msg in unReadMessage" _v-6b753e81="">{{msg.content}}</li> </ul> </div>'},60:function(e,t){e.exports="<div id=app> <carousel v-if=hasLocalUserType v-ref:carousel></carousel> <div v-else class=btn-chose-type> <input type=text v-model=userName /> <button @click=setUserType(true)>Parent</button> <button @click=setUserType(false)>Child</button> </div> </div>"},61:function(e,t,s){var n,i;s(39),n=s(24),i=s(60),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},62:function(e,t,s){var n,i;s(40),n=s(25),i=s(59),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},65:function(e,t){}});
//# sourceMappingURL=app.d5b302d89f4074907738.js.map